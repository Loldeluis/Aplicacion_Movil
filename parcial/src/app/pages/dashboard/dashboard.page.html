<ion-content [fullscreen]="true">
  <ion-header [translucent]="true" color="primary">
    <ion-toolbar>
      <ion-title class="center-title" color="primary">The news</ion-title>
      <ion-buttons slot="end">
        <ion-button (click)="showProfile = !showProfile">
          <ion-icon name="person-circle-outline"></ion-icon>
        </ion-button>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>

  <ion-content [fullscreen]="true">
    <ion-card *ngIf="showProfile" class="profile-card">
      <ion-card-header>
    <!-- Aquí el nombre será un botón que abre el modal -->
    <ion-card-title (click)="openProfileModal()">
      {{ user.name }} {{ user.lastName }}
    </ion-card-title>
    <ion-chip color="success" style="margin-top: 8px;">
      <ion-label>Online</ion-label>
      <ion-icon name="ellipse" color="success"></ion-icon>
    </ion-chip>
  </ion-card-header>

      <ion-card-content>
        <ion-list>
          <ion-list-header>
            Categories
          </ion-list-header>
          <ion-item *ngFor="let cat of categories" (click)="selectCategory(cat.key)" [color]="selectedCategory === cat.key ? 'primary' : ''">
            <ion-label>{{ cat.label }}</ion-label>
          </ion-item>
        </ion-list>
        <div style="margin-top: 18px; text-align: center;">
          <ion-button color="danger" expand="block" (click)="logout()">
            <ion-icon name="log-out-outline" slot="start"></ion-icon>
            Logout
          </ion-button>
        </div>
      </ion-card-content>
    </ion-card>

    <div *ngIf="loading" style="text-align:center; margin-top:2em;">
      <ion-spinner name="crescent"></ion-spinner>
      <p>Loading News...</p>
    </div>
    <div *ngIf="error" style="color:red; text-align:center;">{{ error }}</div>
    <ion-list *ngIf="!loading && !error">
      <ion-item *ngFor="let article of news" (click)="openNews(article)" button detail>
        <ion-thumbnail slot="start" *ngIf="article.urlToImage">
          <img [src]="article.urlToImage" alt="imagen noticia" />
        </ion-thumbnail>
        <ion-label>
          <h2>{{ article.title }}</h2>
          <p>{{ article.description }}</p>
          <small>{{ article.publishedAt | date:'short' }}</small>
        </ion-label>
      </ion-item>
    </ion-list>
  </ion-content>
